<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Service Rate</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4 bg-light">

<div class="container p-4 bg-white rounded shadow">
  <h2 class="mb-4">Service Rate</h2>

  <div class="mb-3 row">
    <div class="col-md-5">
      <label for="clientName" class="form-label">Client Name</label>
      <input type="text" class="form-control" id="clientName" placeholder="Enter client name">
    </div>

    <div class="col-md-5">
      <label for="pickupLocation" class="form-label">Pick-Up Location</label>
      <select class="form-select" id="pickupLocation" onchange="updateZipCode()">
        <option selected disabled>Select a location</option>
        <optgroup label="Metro Manila Area">
          <option value="1773">Tunasan</option>
          <option value="1742">Zapote</option>
          <option value="1700">San Isidro</option>
        </optgroup>
        <optgroup label="Southern Luzon Area">
          <option value="4234">Sto. Tomas</option>
          <option value="4219">Balete</option>
          <option value="4232">Tanauan</option>
        </optgroup>
      </select>
    </div>

    <div class="col-md-2">
      <label for="zipCode" class="form-label">ZIP Code</label>
      <input type="text" class="form-control" id="zipCode" readonly>
    </div>
  </div>

  <div class="gap-2 mb-4 d-flex">
    <button class="btn btn-primary" onclick="generateRateTable(true)">Generate City Table</button>
    <button class="btn btn-secondary" onclick="generateRateTable(false)">Show All Data</button>
  </div>

  <div id="rateTableContainer" style="display: none;">
    <h5 id="tableTitle">Rate Table</h5>
    <div class="table-responsive">
      <table class="table text-center align-middle table-bordered">
        <thead class="table-light" id="tableHead">
          <!-- Table headers inserted here -->
        </thead>
        <tbody id="rateTableBody">
          <!-- Data inserted dynamically -->
        </tbody>
      </table>
    </div>
  </div>
</div>

<script>
  const zipCodes = {
    "Tunasan": "1773",
    "Zapote": "1742",
    "San Isidro": "1700",
    "Sto. Tomas": "4234",
    "Balete": "4219",
    "Tanauan": "4232"
  };

  function updateZipCode() {
    const location = document.getElementById('pickupLocation').value;
    document.getElementById('zipCode').value = location;
  }

  const vehicleRates = {
    "L300": { base: 100, rate: 20.20 },
    "4 Wheeler": { base: 120, rate: 25.32 },
    "6 Wheeler": { base: 150, rate: 30.33 },
    "6WF": { base: 180, rate: 35.70 },
    "10 Wheeler": { base: 200, rate: 40.34 }
  };

  const areas = {
    "Metro Manila Area": [
      { location: "Tunasan", city: "Muntinlupa City", distance: 15 },
      { location: "Zapote", city: "Las Piñas City", distance: 18 },
      { location: "San Isidro", city: "Parañaque City", distance: 20 }
    ],
    "Southern Luzon Area": [
      { location: "Sto. Tomas", city: "Batangas", distance: 60 },
      { location: "Balete", city: "Batangas", distance: 65 },
      { location: "Tanauan", city: "Batangas", distance: 55 }
    ]
  };

  function generateRateTable(cityOnly = true) {
    const tableHead = document.getElementById('tableHead');
    const tableBody = document.getElementById('rateTableBody');
    tableBody.innerHTML = '';

    if (cityOnly) {
      // Headers: City-only mode
      tableHead.innerHTML = `
        <tr>
          <th>City</th>
          <th>Distance (km)</th>
          <th>Rate/km</th>
          <th>L300</th>
          <th>L300 Rate/km</th>
          <th>4 Wheeler</th>
          <th>4W Rate/km</th>
          <th>6 Wheeler</th>
          <th>6W Rate/km</th>
          <th>6WF</th>
          <th>6WF Rate/km</th>
          <th>10 Wheeler</th>
          <th>10W Rate/km</th>
        </tr>
      `;
    } else {
      // Headers: Full data mode
      tableHead.innerHTML = `
        <tr>
          <th>Area</th>
          <th>Location</th>
          <th>City</th>
          <th>Distance (km)</th>
          <th>Rate/km</th>
          <th>L300</th>
          <th>L300 Rate/km</th>
          <th>4 Wheeler</th>
          <th>4W Rate/km</th>
          <th>6 Wheeler</th>
          <th>6W Rate/km</th>
          <th>6WF</th>
          <th>6WF Rate/km</th>
          <th>10 Wheeler</th>
          <th>10W Rate/km</th>
        </tr>
      `;
    }

    for (const [areaName, locations] of Object.entries(areas)) {
      locations.forEach((loc, index) => {
        const row = document.createElement('tr');
        const commonData = `
          <td>${loc.city}</td>
          <td>${loc.distance}</td>
          <td>₱20.00</td>
          <td>₱${vehicleRates["L300"].base}</td>
          <td>₱${vehicleRates["L300"].rate}</td>
          <td>₱${vehicleRates["4 Wheeler"].base}</td>
          <td>₱${vehicleRates["4 Wheeler"].rate}</td>
          <td>₱${vehicleRates["6 Wheeler"].base}</td>
          <td>₱${vehicleRates["6 Wheeler"].rate}</td>
          <td>₱${vehicleRates["6WF"].base}</td>
          <td>₱${vehicleRates["6WF"].rate}</td>
          <td>₱${vehicleRates["10 Wheeler"].base}</td>
          <td>₱${vehicleRates["10 Wheeler"].rate}</td>
        `;

        if (cityOnly) {
          row.innerHTML = commonData;
        } else {
          row.innerHTML = `
            ${index === 0 ? `<td rowspan="${locations.length}">${areaName}</td>` : ''}
            <td>${loc.location}</td>
            ${commonData}
          `;
        }

        tableBody.appendChild(row);
      });
    }

    document.getElementById('rateTableContainer').style.display = 'block';
  }
</script>

</body>
</html>
